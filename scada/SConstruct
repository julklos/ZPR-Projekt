import os

BUILD_DIR = "./build"
SRC_DIR = "./src"
INSTALL_DIR = "./install"
INCLUDE_DIR = "./include"
BINARY_NAME = "scada"
python3 = "/usr/include/python3.6"


# create object files in BUILD_DIR directory
VariantDir(BUILD_DIR, SRC_DIR, duplicate=0)
env = Environment(TARGET_ARCH='x86', CCFLAGS=["-fPIC", "-Wall"])

# collect files for compilation
sources = Glob(BUILD_DIR + '/*.cpp')

# collect include files
env.Append(CPPPATH= [
    INCLUDE_DIR,
    "libs/boost",
    python3
])

# collect compiled libs
env.Append(LIBPATH = [
    "libs/boost"
])

# specify libraries
libs = [
    'boost_python3'
]

# make shared object
libs = env.SharedLibrary(target="scada", source=sources, LIBS=libs)
env.Default(libs)